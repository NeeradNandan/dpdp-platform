<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DPDP Consent Widget Demo</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 40px 24px;
      max-width: 720px;
      margin: 0 auto;
      line-height: 1.6;
      color: #334155;
    }
    h1 { color: #1e293b; margin-bottom: 8px; }
    .subtitle { color: #64748b; margin-bottom: 32px; }
    p { margin: 16px 0; }
    .card {
      background: #f8fafc;
      border-radius: 12px;
      padding: 24px;
      margin: 24px 0;
      border: 1px solid #e2e8f0;
    }
    .card h2 { margin-top: 0; color: #475569; font-size: 16px; }
    button {
      padding: 10px 18px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      background: #2563eb;
      color: white;
      border: none;
      margin-right: 8px;
      margin-top: 8px;
    }
    button:hover { filter: brightness(1.1); }
    button.secondary { background: #f1f5f9; color: #475569; }
    code { background: #e2e8f0; padding: 2px 6px; border-radius: 4px; font-size: 13px; }
  </style>
</head>
<body>
  <h1>DPDP Consent Widget Demo</h1>
  <p class="subtitle">Test the embeddable consent banner locally</p>

  <div class="card">
    <h2>Sample Page Content</h2>
    <p>
      This is dummy content to demonstrate how the consent banner overlays the page.
      The widget appears at the bottom (or top, if configured) and uses a semi-transparent
      backdrop with a clean, modern panel.
    </p>
    <p>
      Under the <strong>Digital Personal Data Protection (DPDP) Act</strong>, websites must
      obtain explicit consent before processing personal data. This widget helps you comply
      with granular consent requirements.
    </p>
  </div>

  <div class="card">
    <h2>Widget Controls</h2>
    <p>Use these buttons to test the widget API:</p>
    <button onclick="window.DPDPShield?.show()">Re-open Banner (DPDPShield.show())</button>
    <button class="secondary" onclick="console.log('Consent:', window.DPDPShield?.getConsent())">
      Log Current Consent
    </button>
    <button class="secondary" onclick="window.DPDPShield?.withdraw('analytics')">
      Withdraw Analytics
    </button>
    <button class="secondary" onclick="localStorage.clear(); sessionStorage.clear(); location.reload();">
      Clear Storage & Reload
    </button>
  </div>

  <p>
    <strong>Config:</strong> The widget is loaded with <code>data-org-id="demo_org_123"</code>
    and <code>data-api-endpoint="https://api.dpdpshield.com/v1/consent"</code>.
    Clear storage and reload to see the banner again.
  </p>

  <!-- Load widget via script tag with data attributes -->
  <script>
    // Optional: override or extend config via global object
    window.__DPDP_CONFIG__ = {
      orgId: 'demo_org_123',
      apiEndpoint: 'https://api.dpdpshield.com/v1/consent',
      position: 'bottom',
      primaryColor: '#2563eb',
      onConsent: function(artifact) {
        console.log('[Demo] Consent recorded:', artifact);
      }
    };
  </script>
  <script src="./dist/widget.js" data-org-id="demo_org_123" data-api-endpoint="https://api.dpdpshield.com/v1/consent"></script>
</body>
</html>
